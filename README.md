# 黄豆输入法

一个原生macOS App，为豆包AI提供类似Typeless的语音输入体验。按住快捷键说话，松开后自动插入文字，同时保护你的剪贴板内容不被覆盖。

## 功能特点

- **零Python依赖**：纯Swift编写的原生macOS应用
- **多种快捷键选择**：
  - 左Command键
  - 右Command键（默认）
  - 左Option键
  - 右Option键
- **剪贴板保护**：语音输入不会覆盖你原有的剪贴板内容
- **菜单栏图标**：点击图标可切换快捷键设置

## 使用方法

### 1. 前置准备

在豆包App中设置语音输入快捷键：
1. 打开豆包App
2. 进入设置 → 快捷键设置
3. 将"语音输入"快捷键设为 **Control+D**

### 2. 安装App

1. 将 `黄豆输入法.app` 拖到 Applications 文件夹
2. 首次运行时需要授予辅助功能权限
3. 如果系统提示无法打开，请到 系统设置 → 隐私与安全性 → 安全性 中允许

### 3. 授予辅助功能权限

1. 打开 系统设置 → 隐私与安全性 → 辅助功能
2. 点击 + 号添加应用
3. 选择 黄豆输入法.app
4. 确保开关已打开

### 4. 使用

1. 点击菜单栏的 🎤 图标选择你想要的快捷键
2. 在任意输入框中，按住选择的快捷键开始说话
3. 松开快捷键，等待文字自动插入

## 技术实现

- **语言**：Swift
- **框架**：Cocoa, Carbon, CoreGraphics
- **事件监听**：CGEventTap 监听键盘修饰键变化
- **剪贴板保护**：NSPasteboard 保存和恢复剪贴板内容
- **豆包触发**：模拟 Control+D 键盘事件

## 与原文方案的改进

1. **零依赖**：不需要Python或任何外部库
2. **原生体验**：Swift编写的原生App，启动更快
3. **更多快捷键**：支持左右Option键和Command键
4. **更稳定**：使用原生API，避免pbpaste/pbcopy的延迟问题

## 文件说明

- `main.swift` - 主程序源代码
- `黄豆输入法` - 编译后的可执行文件
- `黄豆输入法.app` - 完整的App bundle
- `黄豆输入法.dmg` - DMG 安装包
- `create_app.sh` - 创建App bundle的脚本

## 注意事项

- 仅支持macOS 10.15及以上版本
- 需要授予辅助功能权限才能正常工作
- 豆包App必须保持运行状态

## 许可证

MIT License
